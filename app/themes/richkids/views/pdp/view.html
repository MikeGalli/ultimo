<div class="page-title"></div>

</head>
<body>
<!--Slider Block-->
<div class="pdp-slider">
    <div class="big">
        <img ng-src="{{getImage(imagesPath, productImages[0])}}" alt=""/>
    </div>
    <div class="small" ng-repeat="img in productImages">
        <img ng-src="{{getImage(imagesPath, img)}}" alt=""/>
    </div>
    <section class="slider">
        <div class="rslides_container">
            <ul class="rslides" id="slider1">
                <li ng-repeat="img in productImages">
                    <img ng-src="{{getImage(imagesPath, img)}}" alt=""/>
                </li>
            </ul>
        </div>
        <div class="slider-show">
            <div class="slider-soc">
                <a href=""></a>
                <a href=""></a>
                <a href=""></a>
            </div>
            <a href="#">shop now</a>
        </div>
        <div class="clear"></div>
    </section>
    <div class="small" ng-hide="productImages.length">
        <img ng-src="{{getImg('placeholder.png')}}" alt="" class="img-thumbnail" width="250px" height="250px"/>
    </div>

</div>
<!--Info block-->
<section class="pdp-info">
    <div class="tab-wrap">
        <h2>{{product.name}}</h2>
        <p>{{product.price | currency}}</p>
        <div class="pdp-filters col-md-9">
            <div class="col-md-6">
                <div class="input-group spinner pdp-spinner">
                    <label>Quantity</label>

                    <div class="spinner-block">
                        <input placeholder="Qtl" type="text" class="form-control" value="{{qty}}"
                               ng-model="qty" ng-change="update(idx, qty)">

                        <div class="input-group-btn-vertical">
                            <button class="btn" ng-click="changeQty(qty,'up')"><i></i></button>
                            <button class="btn" ng-click="changeQty(qty,'down')"><i></i></button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Custom options -->
            <gui-custom-options item="product" object="this"></gui-custom-options>

            <div class="clear"></div>
        </div>
        <div class="col-md-3">
            <p class="pdp-total">Total:</p>
            <div class="clear"></div>
            <p>{{product.price * qty | number:2 | currency}}</p>
        </div>
        <div class="clear"></div>
        <div class="pdp-btn">
            <gui-message-manager item="messageOptions"></gui-message-manager>
            <a href="" target="_self" ng-click="addToCart()">
                <span class="remove glyphicon glyphicon-plus"></span>
                cart
            </a>
        </div>
        <div class="clear"></div>
    </div>
    <div id="accordion">
        <div class="accordion active">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseDetails"
               target="_self">
                Description
                <div>
                    <span></span>
                </div>
            </a>
            <div id="collapseDetails" class="panel-collapse collapse in">
                <div class="acc-text">
                    {{product.description}}
                </div>
            </div>
        </div>
        <div class="accordion">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseReviews"
               target="_self">
                returns & exchanges
                <div>
                    <span></span>
                </div>
            </a>
        </div>
        <div id="collapseReviews" class="panel-collapse collapse">
            <div class="acc-text">
                <p>If you bought something in a shop and then just change your mind about it, you do not have any legal
                    right to return the goods. However, many shops have a returns policy which lets you to take your
                    items back to the shop for any reason and get a refund.
                </p>

                <p> But you may have rights if you're not happy with the quality of the goods or the item is broken or
                    faulty in some way.
                </p>
            </div>
        </div>
    </div>
</section>
<div class="clear"></div>
<section class="c-img pdp-img">
    <div ng-repeat="_item in related" ng-show="related.length">
        <a class="" href="{{productService.getUrl(_item.Id)}}">
            <img ng-src="{{getImage('',_item.Image)}}" alt="_item.Name"/>
        </a>
    </div>
    <div class="clear"></div>
</section>
<section class="rating">
    <div class="left-block">
        <h5>customers reviews</h5>

        <form>
            <input id="input-21d" value="{{ratingInfo.averageValue | number:2}}" type="number" class="rating disabled" min=0 max=5 step=0.1
                   data-size="xxs">
        </form>
        <p>{{ratingInfo.averageValue | number}} out of 5</p>

        <div class="clear"></div>
        <div class="progressbar">
            <table>
                <tr>
                    <td>5 star</td>
                    <td>
                        <progress value="{{ratingInfo.fifeStarPersent}}" max="100">{{ratingInfo.fifeStarPersent}}</progress>
                    </td>
                    <td>{{ratingInfo.stars_5 | number}}</td>
                </tr>
                <tr>
                    <td>4 star</td>
                    <td>
                        <progress value="{{ratingInfo.fourStarPersent}}" max="100">{{ratingInfo.fourStarPersent}}%</progress>
                    </td>
                    <td>{{ratingInfo.stars_4 | number}}</td>
                </tr>
                <tr>
                    <td>3 star</td>
                    <td>
                        <progress value="{{ratingInfo.threeStarPersent}}" max="100">{{ratingInfo.threeStarPersent}}%</progress>
                    </td>
                    <td>{{ratingInfo.stars_3 | number}}</td>
                </tr>
                <tr>
                    <td>2 star</td>
                    <td>
                        <progress value="{{ratingInfo.twoStarPersent}}" max="100">{{ratingInfo.twoStarPersent}}%</progress>
                    </td>
                    <td>{{ratingInfo.stars_2 | number}}</td>
                </tr>
                <tr>
                    <td>1 star</td>
                    <td>
                        <progress value="{{ratingInfo.oneStarPersent}}" max="100">{{ratingInfo.oneStarPersent}}%</progress>
                    </td>
                    <td>{{ratingInfo.stars_1 | number}}</td>
                </tr>
            </table>
        </div>
    </div>
    <div class="right-block">
        <h5>your rating</h5>

        <form name="reviewForm">
            <input id="input-21d" value="1" ng-model="review.stars" type="number" class="rating" min=0 max=5 step=1
                   data-size="xxs">

            <div class="col-md-12">
                <gui-message-manager item="messageReview"></gui-message-manager>
                <div ng-class="{ 'has-error' : (submittedReview && reviewForm.review.$error.required) || (reviewForm.review.$invalid && !reviewForm.review.$pristine) }">
                    <input class="form-control" type="text" name="review" ng-model="review.comment" required>

                    <p ng-show="(submittedReview && reviewForm.review.$error.required) || (reviewForm.review.$invalid && !reviewForm.review.$pristine)"
                       class="help-block">This field is required.</p>

                </div>
            </div>
        </form>
        <div>
            <a href ng-click="saveReview()">submit</a>
        </div>

    </div>
    <div class="clear"></div>
    <div class="review-sort">
        <ul class="navbar-nav navbar-right">
            <li class="dropdown">
                <a href role="button" data-toggle="dropdown">

                    <p>Sort by: <span>{{sorting}}</span></p>
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <li role="presentation">
                        <a role="menuitem" href="" target="_self" ng-click="sortByRating('desc')">High to Low</a>
                    </li>
                    <li role="presentation">
                        <a role="menuitem" href="" target="_self" ng-click="sortByRating('asc')">Low to High</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="tab-review-sort">
        <ul>
            <li>
                <a href="" target="_self" ng-click="sortByRating('desc')">High to Low</a>
            </li>
            <li>
                <a class="active" href="" target="_self" ng-click="sortByRating('asc')">Low to High</a>
            </li>
        </ul>
    </div>
    <div class="clear"></div>
    <div class="reviews" ng-repeat="_item in reviewsList">
        <div class="left-block">
            <form>
                <input id="input-21d" value="{{_item.rating}}" type="number" class="rating disabled" min=0 max=5
                       step=0.1 data-size="xxs">
            </form>
            <h6>{{_item.username}}</h6>
        </div>
        <div class="right-block">
            <h5>
                {{getReviewTitle(_item)}}
            </h5>
            <span>{{getDate(_item.created_at)}}</span>

            <p>
                {{_item.review}}
            </p>
        </div>
        <div class="clear"></div>
    </div>
</section>

<script>
    (function ($) {

        // slider
        $(document).ready(function () {
            setTimeout(function () {
                $("#slider1").responsiveSlides({
                    auto: false,
                    pager: true,
                    nav: true,
                    speed: 500,
                    maxwidth: 1024,
                    namespace: "centered-btns"
                });
            }, 500);
        });

        // rating
        $(document).ready(function () {
            setTimeout(function () {
                $("input.rating").each(function () {

                    if ($(this).hasClass("disabled")) {
                        $(this).rating({
                            readonly: true,
                            disabled: true,
                            showCaption: false,
                            showClear: false
                        });
                    } else {
                        $(this).rating({
                            showCaption: false,
                            showClear: false
                        });
                    }

                })

            }, 500)
        })

    })(jQuery)
</script>