box: wercker/nodejs
# Build definition
build:
  # The steps that will be executed on build
  steps:
    # A step that executes `npm install` command
    - npm-install
    - script:
        name: install bower and gulp
        code: sudo npm install -g bower gulp
    - script:
        name: run bower install
        code: bower install
    - script:
        name: gulp build 
        code: gulp build

    # A custom script step, name value is used in the UI
    # and the code value contains the command that get executed
    - script:
        name: echo nodejs information
        code: |
  after-steps:
    - wercker/hipchat-notify@1.0.3:
        token: $HIPCHAT_TOKEN
        room-id: 394852
        from-name: Wercker
deploy:
    steps:
        - wercker/add-ssh-key:
            keyname: REMOTE_HOST_KEY
        - add-to-known_hosts:
            hostname: $REMOTE_HOST
        - script:
            name: Copy Fig.yml
            code: scp fig.yml root@REMOTE_HOST:/tmp/fig.yml
        - script:
            name: Fig Up
            code: ssh root@REMOTE_HOST "cd /tmp/; fig kill; fig up -d"



