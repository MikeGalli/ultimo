<div>
    <form name="customOptionsForm"
        role="form">
        <div ng-repeat="option in product.options">

            <ng-form name="customOptionsFormIn">
                <div class="custom-option">
                    <div ng-switch="option.type"
                        class="{{option.cssClass}}">

                        <!-- Input -->
                        <div ng-switch-when="field"
                            class="form-group"
                            ng-class="{'has-error': parent.submitted && customOptionsFormIn[option.label].$error.required}">

                            <label class="option-set-label">
                                {{option.label}}<span class="asterisk"
                                    ng-if="option.required">*</span>
                            </label>
                            <input type="text"
                                class="form-control"
                                ng-model="parent.options[option.label]"
                                id="{{ option.label }}"
                                name="{{option.label}}"
                                ng-required="option.required" />

                            <div ng-show="parent.submitted && customOptionsFormIn[option.label].$error.required"
                                class="help-block">
                                This field is required.
                            </div>
                        </div>

                        <!-- Date Picker -->
                        <!--
                        NOTE:
                            1. the placeholder here is for browser that don't offer calendars
                            1. the value is stored as yyyy-mm-dd, but is displayed based on your locale
                            1. `min` is enforced by angular
                        -->
                        <div ng-switch-when="date"
                            class="form-group"
                            ng-class="{'has-error': parent.submitted && customOptionsFormIn[option.label].$error}">

                            <label class="option-set-label">
                                {{option.label}}<span class="asterisk"
                                    ng-if="option.required">*</span>
                            </label>
                            <input type="date"
                                class="form-control"
                                ng-model="parent.options[option.label]"
                                id="{{option.label}}"
                                name="{{option.label}}"
                                min="{{tomorrowsDate}}"
                                placeholder="yyyy-mm-dd"
                                ng-required="option.required" />

                            <div ng-show="parent.submitted"
                                class="help-block">
                                <div ng-show="customOptionsFormIn[option.label].$error.required">
                                    This field is required.
                                </div>
                                <div ng-show="customOptionsFormIn[option.label].$error.min">
                                    The earliest date this can be sent is tomorrow.
                                </div>
                            </div>
                        </div>

                        <!-- Select -->
                        <div ng-switch-when="select"
                            class="form-group"
                            ng-class="{'has-error': parent.submitted && customOptionsFormIn[option.label].$error.required}">

                            <label class="option-set-label">
                                {{option.label}}<span class="asterisk"
                                    ng-if="option.required">*</span>
                            </label>
                            <select class="form-control"
                                id="{{ option.label }}"
                                name="{{option.label}}"
                                ng-model="parent.options[option.label]"
                                ng-options="optionItem.label as optionItem.label for optionItem in option.options"
                                ng-required="option.required">
                                <option value="">-- Please Select --</option>
                            </select>

                            <div ng-show="parent.submitted && customOptionsFormIn[option.label].$error.required"
                                class="help-block">
                                This field is required.
                            </div>
                        </div>

                        <!-- Radio -->
                        <div ng-switch-when="radio"
                            ng-init="selectFirstRadio(option)"
                            class="form-group form-inline pdp-radio-group"
                            ng-class="{'has-error':parent.submitted && customOptionsFormIn[option.label].$error.required}">

                            <label class="option-set-label">
                                {{option.label}}<span class="asterisk"
                                    ng-if="option.required">*</span>
                            </label>

                            <div class="radio"
                                ng-repeat="optionItem in option.options">
                                <label>
                                    <input type="radio"
                                        value="{{optionItem.label}}"
                                        name="{{option.label}}"
                                        ng-model="parent.options[option.label]"
                                        ng-required="option.required" /> {{optionItem.label}}
                                </label>
                            </div>

                            <div ng-show="parent.submitted && customOptionsFormIn[option.label].$error.required"
                                class="help-block">
                                This field is required.
                            </div>
                        </div>

                        <!-- Multi-select -->
                        <div ng-switch-when="multi_select"
                            class="form-group"
                            ng-class="{'has-error': parent.submitted && customOptionsFormIn[option.label].$error.required}">

                            <label class="option-set-label">
                                {{option.label}}
                                <span class="asterisk"
                                    ng-if="option.required">*</span>
                            </label>

                            <div class="checkbox"
                                ng-repeat="optionItem in option.options">
                                <label>
                                    <input type="checkbox"
                                        name="{{option.label}}[]"
                                        value="{{optionItem.label}}"
                                        ng-change="toggleCheckbox(option)"
                                        ng-model="optionItem.selected"
                                        ng-required="option.required" /> {{optionItem.label}}
                                </label>
                            </div>

                            <div ng-show="parent.submitted && customOptionsFormIn[option.label].$error.required"
                                class="help-block">
                                This field is required.
                            </div>
                        </div>
                    </div>
                </div>
            </ng-form>
        </div>
    </form>
</div>

